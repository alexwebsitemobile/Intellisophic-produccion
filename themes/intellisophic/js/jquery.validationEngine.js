(function(a){var b={init:function(d){var c=this;if(!c.data("jqv")||c.data("jqv")==null){d=b._saveOptions(c,d);a(document).on("click",".formError",function(){a(this).fadeOut(150,function(){a(this).parent(".formErrorOuter").remove();a(this).remove()})})}return this},attach:function(c){var e=this;var d;if(c){d=b._saveOptions(e,c)}else{d=e.data("jqv")}d.validateAttribute=(e.find("[data-validation-engine*=validate]").length)?"data-validation-engine":"class";if(d.binded){e.on(d.validationEventTrigger,"["+d.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",b._onFieldEvent);e.on("click","["+d.validateAttribute+"*=validate][type=checkbox],["+d.validateAttribute+"*=validate][type=radio]",b._onFieldEvent);e.on(d.validationEventTrigger,"["+d.validateAttribute+"*=validate][class*=datepicker]",{delay:300},b._onFieldEvent)}if(d.autoPositionUpdate){a(window).bind("resize",{noAnimation:true,formElem:e},b.updatePromptsPosition)}e.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",b._submitButtonClick);e.removeData("jqv_submitButton");e.on("submit",b._onSubmitEvent);return this},detach:function(){var d=this;var c=d.data("jqv");d.off(c.validationEventTrigger,"["+c.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",b._onFieldEvent);d.off("click","["+c.validateAttribute+"*=validate][type=checkbox],["+c.validateAttribute+"*=validate][type=radio]",b._onFieldEvent);d.off(c.validationEventTrigger,"["+c.validateAttribute+"*=validate][class*=datepicker]",b._onFieldEvent);d.off("submit",b._onSubmitEvent);d.removeData("jqv");d.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",b._submitButtonClick);d.removeData("jqv_submitButton");if(c.autoPositionUpdate){a(window).off("resize",b.updatePromptsPosition)}return this},validate:function(){var c=a(this);var d=null;if(c.is("form")||c.hasClass("validationEngineContainer")){if(c.hasClass("validating")){return false}else{c.addClass("validating");var e=c.data("jqv");var d=b._validateFields(this);setTimeout(function(){c.removeClass("validating")},100);if(d&&e.onSuccess){e.onSuccess()}else{if(!d&&e.onFailure){e.onFailure()}}}}else{if(c.is("form")||c.hasClass("validationEngineContainer")){c.removeClass("validating")}else{var f=c.closest("form, .validationEngineContainer"),e=(f.data("jqv"))?f.data("jqv"):a.validationEngine.defaults,d=b._validateField(c,e)}}if(e.onValidationComplete){return !!e.onValidationComplete(f,d)}return d},updatePromptsPosition:function(c){if(c&&this==window){var f=c.data.formElem;var d=c.data.noAnimation}else{var f=a(this.closest("form, .validationEngineContainer"))}var e=f.data("jqv");if(!e){e=b._saveOptions(f,e)}f.find("["+e.validateAttribute+"*=validate]").not(":disabled").each(function(){var i=a(this);if(e.prettySelect&&i.is(":hidden")){i=f.find("#"+e.usePrefix+i.attr("id")+e.useSuffix)}var h=b._getPrompt(i);var g=a(h).find(".formErrorContent").html();if(h){b._updatePrompt(i,a(h),g,undefined,false,e,d)}});return this},showPrompt:function(h,e,f,c){var g=this.closest("form, .validationEngineContainer");var d=g.data("jqv");if(!d){d=b._saveOptions(this,d)}if(f){d.promptPosition=f}d.showArrow=c==true;b._showPrompt(this,h,e,false,d);return this},hide:function(){var f=a(this).closest("form, .validationEngineContainer");var e=f.data("jqv");if(!e){e=b._saveOptions(f,e)}var d=(e&&e.fadeDuration)?e.fadeDuration:0.3;var c;if(a(this).is("form")||a(this).hasClass("validationEngineContainer")){c="parentForm"+b._getClassName(a(this).attr("id"))}else{c=b._getClassName(a(this).attr("id"))+"formError"}a("."+c).fadeTo(d,0.3,function(){a(this).parent(".formErrorOuter").remove();a(this).remove()});return this},hideAll:function(){var e=this;var d=e.data("jqv");var c=d?d.fadeDuration:300;a(".formError").fadeTo(c,300,function(){a(this).parent(".formErrorOuter").remove();a(this).remove()});return this},_onFieldEvent:function(c){var f=a(this);var e=f.closest("form, .validationEngineContainer");var d=e.data("jqv");if(!d){d=b._saveOptions(e,d)}d.eventTrigger="field";window.setTimeout(function(){b._validateField(f,d)},(c.data)?c.data.delay:0)},_onSubmitEvent:function(){var f=a(this);var e=f.data("jqv");if(f.data("jqv_submitButton")){var c=a("#"+f.data("jqv_submitButton"));if(c){if(c.length>0){if(c.hasClass("validate-skip")||c.attr("data-validation-engine-skip")=="true"){return true}}}}e.eventTrigger="submit";var d=b._validateFields(f);if(d&&e.ajaxFormValidation){b._validateFormWithAjax(f,e);return false}if(e.onValidationComplete){return !!e.onValidationComplete(f,d)}return d},_checkAjaxStatus:function(c){var d=true;a.each(c.ajaxValidCache,function(e,f){if(!f){d=false;return false}});return d},_checkAjaxFieldStatus:function(d,c){return c.ajaxValidCache[d]==true},_validateFields:function(n){var k=n.data("jqv");var m=false;n.trigger("jqv.form.validating");var d=null;n.find("["+k.validateAttribute+"*=validate]").not(":disabled").each(function(){var p=a(this);var o=[];if(a.inArray(p.attr("name"),o)<0){m|=b._validateField(p,k);if(m&&d==null){if(p.is(":hidden")&&k.prettySelect){d=p=n.find("#"+k.usePrefix+b._jqSelector(p.attr("id"))+k.useSuffix)}else{if(p.data("jqv-prompt-at") instanceof jQuery){p=p.data("jqv-prompt-at")}else{if(p.data("jqv-prompt-at")){p=a(p.data("jqv-prompt-at"))}}d=p}}if(k.doNotShowAllErrosOnSubmit){return false}o.push(p.attr("name"));if(k.showOneMessage==true&&m){return false}}});n.trigger("jqv.form.result",[m]);if(m){if(k.scroll){var e=d.offset().top;var l=d.offset().left;var h=k.promptPosition;if(typeof(h)=="string"&&h.indexOf(":")!=-1){h=h.substring(0,h.indexOf(":"))}if(h!="bottomRight"&&h!="bottomLeft"){var g=b._getPrompt(d);if(g){e=g.offset().top}}if(k.scrollOffset){e-=k.scrollOffset}if(k.isOverflown){var f=a(k.overflownDIV);if(!f.length){return false}var i=f.scrollTop();var j=-parseInt(f.offset().top);e+=i+j-5;var c=a(k.overflownDIV+":not(:animated)");c.animate({scrollTop:e},1100,function(){if(k.focusFirstField){d.focus()}})}else{a("html, body").animate({scrollTop:e},1100,function(){if(k.focusFirstField){d.focus()}});a("html, body").animate({scrollLeft:l},1100)}}else{if(k.focusFirstField){d.focus()}}return false}return true},_validateFormWithAjax:function(h,e){var d=h.serialize();var g=(e.ajaxFormValidationMethod)?e.ajaxFormValidationMethod:"GET";var f=(e.ajaxFormValidationURL)?e.ajaxFormValidationURL:h.attr("action");var c=(e.dataType)?e.dataType:"json";a.ajax({type:g,url:f,cache:false,dataType:c,data:d,form:h,methods:b,options:e,beforeSend:function(){return e.onBeforeAjaxFormValidation(h,e)},error:function(i,j){if(e.onFailure){e.onFailure(i,j)}else{b._ajaxError(i,j)}},success:function(q){if((c=="json")&&(q!==true)){var k=false;for(var p=0;p<q.length;p++){var n=q[p];var j=n[0];var l=a(a("#"+j)[0]);if(l.length==1){var o=n[2];if(n[1]==true){if(o==""||!o){b._closePrompt(l)}else{if(e.allrules[o]){var m=e.allrules[o].alertTextOk;if(m){o=m}}if(e.showPrompts){b._showPrompt(l,o,"pass",false,e,true)}}}else{k|=true;if(e.allrules[o]){var m=e.allrules[o].alertText;if(m){o=m}}if(e.showPrompts){b._showPrompt(l,o,"",false,e,true)}}}}e.onAjaxFormComplete(!k,h,q,e)}else{e.onAjaxFormComplete(true,h,q,e)}}})},_validateField:function(d,h,x){if(!d.attr("id")){d.attr("id","form-validation-field-"+a.validationEngine.fieldIdCounter);++a.validationEngine.fieldIdCounter}if(!h.validateNonVisibleFields&&(d.is(":hidden")&&!h.prettySelect||d.parent().is(":hidden"))){return false}var f=d.attr(h.validateAttribute);var A=/validate\[(.*)\]/.exec(f);if(!A){return false}var l=A[1];var y=l.split(/\[|,|\]/);var k=false;var e=d.attr("name");var p="";var n="";var c=false;var w=false;h.isError=false;h.showArrow=true;if(h.maxErrorsPerField>0){w=true}var o=a(d.closest("form, .validationEngineContainer"));for(var j=0;j<y.length;j++){y[j]=y[j].replace(" ","");if(y[j]===""){delete y[j]}}for(var j=0,m=0;j<y.length;j++){if(w&&m>=h.maxErrorsPerField){if(!c){var r=a.inArray("required",y);c=(r!=-1&&r>=j)}break}var q=undefined;switch(y[j]){case"required":c=true;q=b._getErrorMessage(o,d,y[j],y,j,h,b._required);break;case"custom":q=b._getErrorMessage(o,d,y[j],y,j,h,b._custom);break;case"groupRequired":var z="["+h.validateAttribute+"*="+y[j+1]+"]";var u=o.find(z).eq(0);if(u[0]!=d[0]){b._validateField(u,h,x);h.showArrow=true}q=b._getErrorMessage(o,d,y[j],y,j,h,b._groupRequired);if(q){c=true}h.showArrow=false;break;case"ajax":q=b._ajax(d,y,j,h);if(q){n="load"}break;case"minSize":q=b._getErrorMessage(o,d,y[j],y,j,h,b._minSize);break;case"maxSize":q=b._getErrorMessage(o,d,y[j],y,j,h,b._maxSize);break;case"min":q=b._getErrorMessage(o,d,y[j],y,j,h,b._min);break;case"max":q=b._getErrorMessage(o,d,y[j],y,j,h,b._max);break;case"past":q=b._getErrorMessage(o,d,y[j],y,j,h,b._past);break;case"future":q=b._getErrorMessage(o,d,y[j],y,j,h,b._future);break;case"dateRange":var z="["+h.validateAttribute+"*="+y[j+1]+"]";h.firstOfGroup=o.find(z).eq(0);h.secondOfGroup=o.find(z).eq(1);if(h.firstOfGroup[0].value||h.secondOfGroup[0].value){q=b._getErrorMessage(o,d,y[j],y,j,h,b._dateRange)}if(q){c=true}h.showArrow=false;break;case"dateTimeRange":var z="["+h.validateAttribute+"*="+y[j+1]+"]";h.firstOfGroup=o.find(z).eq(0);h.secondOfGroup=o.find(z).eq(1);if(h.firstOfGroup[0].value||h.secondOfGroup[0].value){q=b._getErrorMessage(o,d,y[j],y,j,h,b._dateTimeRange)}if(q){c=true}h.showArrow=false;break;case"maxCheckbox":d=a(o.find("input[name='"+e+"']"));q=b._getErrorMessage(o,d,y[j],y,j,h,b._maxCheckbox);break;case"minCheckbox":d=a(o.find("input[name='"+e+"']"));q=b._getErrorMessage(o,d,y[j],y,j,h,b._minCheckbox);break;case"equals":q=b._getErrorMessage(o,d,y[j],y,j,h,b._equals);break;case"funcCall":q=b._getErrorMessage(o,d,y[j],y,j,h,b._funcCall);break;case"creditCard":q=b._getErrorMessage(o,d,y[j],y,j,h,b._creditCard);break;case"condRequired":q=b._getErrorMessage(o,d,y[j],y,j,h,b._condRequired);if(q!==undefined){c=true}break;case"funcCallRequired":q=b._getErrorMessage(o,d,y[j],y,j,h,b._funcCallRequired);if(q!==undefined){c=true}break;default:}var v=false;if(typeof q=="object"){switch(q.status){case"_break":v=true;break;case"_error":q=q.message;break;case"_error_no_prompt":return true;break;default:break}}if(j==0&&l.indexOf("funcCallRequired")==0&&q!==undefined){p+=q+"<br/>";h.isError=true;m++;v=true}if(v){break}if(typeof q=="string"){p+=q+"<br/>";h.isError=true;m++}}if(!c&&!(d.val())&&d.val().length<1&&a.inArray("equals",y)<0){h.isError=false}var t=d.prop("type");var s=d.data("promptPosition")||h.promptPosition;if((t=="radio"||t=="checkbox")&&o.find("input[name='"+e+"']").size()>1){if(s==="inline"){d=a(o.find("input[name='"+e+"'][type!=hidden]:last"))}else{d=a(o.find("input[name='"+e+"'][type!=hidden]:first"))}h.showArrow=h.showArrowOnRadioAndCheckbox}if(d.is(":hidden")&&h.prettySelect){d=o.find("#"+h.usePrefix+b._jqSelector(d.attr("id"))+h.useSuffix)}if(h.isError&&h.showPrompts){b._showPrompt(d,p,n,false,h)}else{if(!k){b._closePrompt(d)}}if(!k){d.trigger("jqv.field.result",[d,h.isError,p])}var g=a.inArray(d[0],h.InvalidFields);if(g==-1){if(h.isError){h.InvalidFields.push(d[0])}}else{if(!h.isError){h.InvalidFields.splice(g,1)}}b._handleStatusCssClasses(d,h);if(h.isError&&h.onFieldFailure){h.onFieldFailure(d)}if(!h.isError&&h.onFieldSuccess){h.onFieldSuccess(d)}return h.isError},_handleStatusCssClasses:function(d,c){if(c.addSuccessCssClassToField){d.removeClass(c.addSuccessCssClassToField)}if(c.addFailureCssClassToField){d.removeClass(c.addFailureCssClassToField)}if(c.addSuccessCssClassToField&&!c.isError){d.addClass(c.addSuccessCssClassToField)}if(c.addFailureCssClassToField&&c.isError){d.addClass(c.addFailureCssClassToField)}},_getErrorMessage:function(j,c,n,p,o,d,l){var k=jQuery.inArray(n,p);if(n==="custom"||n==="funcCall"||n==="funcCallRequired"){var q=p[k+1];n=n+"["+q+"]";delete (p[k])}var g=n;var m=(c.attr("data-validation-engine"))?c.attr("data-validation-engine"):c.attr("class");var h=m.split(" ");var e;if(n=="future"||n=="past"||n=="maxCheckbox"||n=="minCheckbox"){e=l(j,c,p,o,d)}else{e=l(c,p,o,d)}if(e!=undefined){var f=b._getCustomErrorMessage(a(c),h,g,d);if(f){e=f}}return e},_getCustomErrorMessage:function(d,g,l,h){var e=false;var j=/^custom\[.*\]$/.test(l)?b._validityProp.custom:b._validityProp[l];if(j!=undefined){e=d.attr("data-errormessage-"+j);if(e!=undefined){return e}}e=d.attr("data-errormessage");if(e!=undefined){return e}var c="#"+d.attr("id");if(typeof h.custom_error_messages[c]!="undefined"&&typeof h.custom_error_messages[c][l]!="undefined"){e=h.custom_error_messages[c][l]["message"]}else{if(g.length>0){for(var k=0;k<g.length&&g.length>0;k++){var f="."+g[k];if(typeof h.custom_error_messages[f]!="undefined"&&typeof h.custom_error_messages[f][l]!="undefined"){e=h.custom_error_messages[f][l]["message"];break}}}}if(!e&&typeof h.custom_error_messages[l]!="undefined"&&typeof h.custom_error_messages[l]["message"]!="undefined"){e=h.custom_error_messages[l]["message"]}return e},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",funcCallRequired:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(c,l,j,g,k){switch(c.prop("type")){case"radio":case"checkbox":if(k){if(!c.prop("checked")){return g.allrules[l[j]].alertTextCheckboxMultiple}break}var m=c.closest("form, .validationEngineContainer");var e=c.attr("name");if(m.find("input[name='"+e+"']:checked").size()==0){if(m.find("input[name='"+e+"']:visible").size()==1){return g.allrules[l[j]].alertTextCheckboxe}else{return g.allrules[l[j]].alertTextCheckboxMultiple}}break;case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var f=a.trim(c.val());var d=a.trim(c.attr("data-validation-placeholder"));var h=a.trim(c.attr("placeholder"));if((!f)||(d&&f==d)||(h&&f==h)){return g.allrules[l[j]].alertText}break}},_groupRequired:function(c,g,f,e){var d="["+e.validateAttribute+"*="+g[f+1]+"]";var h=false;c.closest("form, .validationEngineContainer").find(d).each(function(){if(!b._required(a(this),g,f,e)){h=true;return false}});if(!h){return e.allrules[g[f]].alertText}},_custom:function(c,k,h,f){var j=k[h+1];var d=f.allrules[j];var g;if(!d){alert("jqv:custom rule not found - "+j);return}if(d.regex){var l=d.regex;if(!l){alert("jqv:custom regex not found - "+j);return}var e=new RegExp(l);if(!e.test(c.val())){return f.allrules[j].alertText}}else{if(d.func){g=d.func;if(typeof(g)!=="function"){alert("jqv:custom parameter 'function' is no function - "+j);return}if(!g(c,k,h,f)){return f.allrules[j].alertText}}else{alert("jqv:custom type not allowed "+j);return}}},_funcCall:function(d,k,h,f){var e=k[h+1];var g;if(e.indexOf(".")>-1){var j=e.split(".");var c=window;while(j.length){c=c[j.shift()]}g=c}else{g=window[e]||f.customFunctions[e]}if(typeof(g)=="function"){return g(d,k,h,f)}},_funcCallRequired:function(f,c,d,e){return b._funcCall(f,c,d,e)},_equals:function(g,c,d,f){var e=c[d+1];if(g.val()!=a("#"+e).val()){return f.allrules.equals.alertText}},_maxSize:function(c,h,g,f){var d=h[g+1];var e=c.val().length;if(e>d){var j=f.allrules.maxSize;return j.alertText+d+j.alertText2}},_minSize:function(c,j,h,g){var d=j[h+1];var f=c.val().length;if(f<d){var e=g.allrules.minSize;return e.alertText+d+e.alertText2}},_min:function(c,j,h,g){var d=parseFloat(j[h+1]);var f=parseFloat(c.val());if(f<d){var e=g.allrules.min;if(e.alertText2){return e.alertText+d+e.alertText2}return e.alertText+d}},_max:function(c,h,g,f){var d=parseFloat(h[g+1]);var e=parseFloat(c.val());if(e>d){var j=f.allrules.max;if(j.alertText2){return j.alertText+d+j.alertText2}return j.alertText+d}},_past:function(l,c,k,h,f){var e=k[h+1];var d=a(l.find("*[name='"+e.replace(/^#+/,"")+"']"));var j;if(e.toLowerCase()=="now"){j=new Date()}else{if(undefined!=d.val()){if(d.is(":disabled")){return}j=b._parseDate(d.val())}else{j=b._parseDate(e)}}var m=b._parseDate(c.val());if(m>j){var g=f.allrules.past;if(g.alertText2){return g.alertText+b._dateToString(j)+g.alertText2}return g.alertText+b._dateToString(j)}},_future:function(l,c,k,h,f){var e=k[h+1];var d=a(l.find("*[name='"+e.replace(/^#+/,"")+"']"));var j;if(e.toLowerCase()=="now"){j=new Date()}else{if(undefined!=d.val()){if(d.is(":disabled")){return}j=b._parseDate(d.val())}else{j=b._parseDate(e)}}var m=b._parseDate(c.val());if(m<j){var g=f.allrules.future;if(g.alertText2){return g.alertText+b._dateToString(j)+g.alertText2}return g.alertText+b._dateToString(j)}},_isDate:function(c){var d=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return d.test(c)},_isDateTime:function(d){var c=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return c.test(d)},_dateCompare:function(d,c){return(new Date(d.toString())<new Date(c.toString()))},_dateRange:function(f,c,d,e){if((!e.firstOfGroup[0].value&&e.secondOfGroup[0].value)||(e.firstOfGroup[0].value&&!e.secondOfGroup[0].value)){return e.allrules[c[d]].alertText+e.allrules[c[d]].alertText2}if(!b._isDate(e.firstOfGroup[0].value)||!b._isDate(e.secondOfGroup[0].value)){return e.allrules[c[d]].alertText+e.allrules[c[d]].alertText2}if(!b._dateCompare(e.firstOfGroup[0].value,e.secondOfGroup[0].value)){return e.allrules[c[d]].alertText+e.allrules[c[d]].alertText2}},_dateTimeRange:function(f,c,d,e){if((!e.firstOfGroup[0].value&&e.secondOfGroup[0].value)||(e.firstOfGroup[0].value&&!e.secondOfGroup[0].value)){return e.allrules[c[d]].alertText+e.allrules[c[d]].alertText2}if(!b._isDateTime(e.firstOfGroup[0].value)||!b._isDateTime(e.secondOfGroup[0].value)){return e.allrules[c[d]].alertText+e.allrules[c[d]].alertText2}if(!b._dateCompare(e.firstOfGroup[0].value,e.secondOfGroup[0].value)){return e.allrules[c[d]].alertText+e.allrules[c[d]].alertText2}},_maxCheckbox:function(j,d,h,g,f){var e=h[g+1];var k=d.attr("name");var c=j.find("input[name='"+k+"']:checked").size();if(c>e){f.showArrow=false;if(f.allrules.maxCheckbox.alertText2){return f.allrules.maxCheckbox.alertText+" "+e+" "+f.allrules.maxCheckbox.alertText2}return f.allrules.maxCheckbox.alertText}},_minCheckbox:function(j,d,h,g,f){var e=h[g+1];var k=d.attr("name");var c=j.find("input[name='"+k+"']:checked").size();if(c<e){f.showArrow=false;return f.allrules.minCheckbox.alertText+" "+e+" "+f.allrules.minCheckbox.alertText2}},_creditCard:function(d,m,l,j){var c=false,h=d.val().replace(/ +/g,"").replace(/-+/g,"");var n=h.length;if(n>=14&&n<=16&&parseInt(h)>0){var k=0,l=n-1,g=1,e,f=new String();do{e=parseInt(h.charAt(l));f+=(g++%2==0)?e*2:e}while(--l>=0);for(l=0;l<f.length;l++){k+=parseInt(f.charAt(l))}c=k%10==0}if(!c){return j.allrules.creditCard.alertText}},_ajax:function(c,q,p,d){var g=q[p+1];var o=d.allrules[g];var j=o.extraData;var r=o.extraDataDynamic;var e={fieldId:c.attr("id"),fieldValue:c.val()};if(typeof j==="object"){a.extend(e,j)}else{if(typeof j==="string"){var k=j.split("&");for(var p=0;p<k.length;p++){var l=k[p].split("=");if(l[0]&&l[0]){e[l[0]]=l[1]}}}}if(r){var s=[];var f=String(r).split(",");for(var p=0;p<f.length;p++){var n=f[p];if(a(n).length){var m=c.closest("form, .validationEngineContainer").find(n).val();var h=n.replace("#","")+"="+escape(m);e[n.replace("#","")]=m}}}if(d.eventTrigger=="field"){delete (d.ajaxValidCache[c.attr("id")])}if(!d.isError&&!b._checkAjaxFieldStatus(c.attr("id"),d)){a.ajax({type:d.ajaxFormValidationMethod,url:o.url,cache:false,dataType:"json",data:e,field:c,rule:o,methods:b,options:d,beforeSend:function(){},error:function(i,t){if(d.onFailure){d.onFailure(i,t)}else{b._ajaxError(i,t)}},success:function(x){var i=x[0];var t=a("#"+i).eq(0);if(t.length==1){var v=x[1];var w=x[2];if(!v){d.ajaxValidCache[i]=false;d.isError=true;if(w){if(d.allrules[w]){var u=d.allrules[w].alertText;if(u){w=u}}}else{w=o.alertText}if(d.showPrompts){b._showPrompt(t,w,"",true,d)}}else{d.ajaxValidCache[i]=true;if(w){if(d.allrules[w]){var u=d.allrules[w].alertTextOk;if(u){w=u}}}else{w=o.alertTextOk}if(d.showPrompts){if(w){b._showPrompt(t,w,"pass",true,d)}else{b._closePrompt(t)}}if(d.eventTrigger=="submit"){c.closest("form").submit()}}}t.trigger("jqv.field.result",[t,d.isError,w])}});return o.alertTextLoad}},_ajaxError:function(c,d){if(c.status==0&&d==null){alert("The page is not served from a server! ajax call failed")}else{if(typeof console!="undefined"){console.log("Ajax error: "+c.status+" "+d)}}},_dateToString:function(c){return c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()},_parseDate:function(e){var c=e.split("-");if(c==e){c=e.split("/")}if(c==e){c=e.split(".");return new Date(c[2],(c[1]-1),c[0])}return new Date(c[0],(c[1]-1),c[2])},_showPrompt:function(c,d,g,h,f,i){if(c.data("jqv-prompt-at") instanceof jQuery){c=c.data("jqv-prompt-at")}else{if(c.data("jqv-prompt-at")){c=a(c.data("jqv-prompt-at"))}}var e=b._getPrompt(c);if(i){e=false}if(a.trim(d)){if(e){b._updatePrompt(c,e,d,g,h,f)}else{b._buildPrompt(c,d,g,h,f)}}},_buildPrompt:function(c,d,i,k,f){var e=a("<div>");e.addClass(b._getClassName(c.attr("id"))+"formError");e.addClass("parentForm"+b._getClassName(c.closest("form, .validationEngineContainer").attr("id")));e.addClass("formError");switch(i){case"pass":e.addClass("greenPopup");break;case"load":e.addClass("blackPopup");break;default:}if(k){e.addClass("ajaxed")}var h=a("<div>").addClass("formErrorContent").html(d).appendTo(e);var n=c.data("promptPosition")||f.promptPosition;if(f.showArrow){var m=a("<div>").addClass("formErrorArrow");if(typeof(n)=="string"){var l=n.indexOf(":");if(l!=-1){n=n.substring(0,l)}}switch(n){case"bottomLeft":case"bottomRight":e.find(".formErrorContent").before(m);m.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":m.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');e.append(m);break}}if(f.addPromptClass){e.addClass(f.addPromptClass)}var j=c.attr("data-required-class");if(j!==undefined){e.addClass(j)}else{if(f.prettySelect){if(a("#"+c.attr("id")).next().is("select")){var g=a("#"+c.attr("id").substr(f.usePrefix.length).substring(f.useSuffix.length)).attr("data-required-class");if(g!==undefined){e.addClass(g)}}}}e.css({opacity:0});if(n==="inline"){e.addClass("inline");if(typeof c.attr("data-prompt-target")!=="undefined"&&a("#"+c.attr("data-prompt-target")).length>0){e.appendTo(a("#"+c.attr("data-prompt-target")))}else{c.after(e)}}else{c.before(e)}var l=b._calculatePosition(c,e,f);e.css({position:n==="inline"?"relative":"absolute",top:l.callerTopPosition,left:l.callerleftPosition,marginTop:l.marginTopSize,opacity:0}).data("callerField",c);if(f.autoHidePrompt){setTimeout(function(){e.animate({opacity:0},function(){e.closest(".formErrorOuter").remove();e.remove()})},f.autoHideDelay)}return e.animate({opacity:0.87})},_updatePrompt:function(c,f,e,i,g,j,d){if(f){if(typeof i!=="undefined"){if(i=="pass"){f.addClass("greenPopup")}else{f.removeClass("greenPopup")}if(i=="load"){f.addClass("blackPopup")}else{f.removeClass("blackPopup")}}if(g){f.addClass("ajaxed")}else{f.removeClass("ajaxed")}f.find(".formErrorContent").html(e);var k=b._calculatePosition(c,f,j);var h={top:k.callerTopPosition,left:k.callerleftPosition,marginTop:k.marginTopSize};if(d){f.css(h)}else{f.animate(h)}}},_closePrompt:function(d){var c=b._getPrompt(d);if(c){c.fadeTo("fast",0,function(){c.parent(".formErrorOuter").remove();c.remove()})}},closePrompt:function(c){return b._closePrompt(c)},_getPrompt:function(f){var d=a(f).closest("form, .validationEngineContainer").attr("id");var e=b._getClassName(f.attr("id"))+"formError";var c=a("."+b._escapeExpression(e)+".parentForm"+b._getClassName(d))[0];if(c){return a(c)}},_escapeExpression:function(c){return c.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(f){var e=a(document);var c=a("body");var d=(f&&f.hasClass("rtl"))||(f&&(f.attr("dir")||"").toLowerCase()==="rtl")||e.hasClass("rtl")||(e.attr("dir")||"").toLowerCase()==="rtl"||c.hasClass("rtl")||(c.attr("dir")||"").toLowerCase()==="rtl";return Boolean(d)},_calculatePosition:function(d,h,f){var r,q,c;var p=d.width();var m=d.position().left;var o=d.position().top;var g=d.height();var l=h.height();r=q=0;c=-l;var j=d.data("promptPosition")||f.promptPosition;var i="";var k="";var n=0;var e=0;if(typeof(j)=="string"){if(j.indexOf(":")!=-1){i=j.substring(j.indexOf(":")+1);j=j.substring(0,j.indexOf(":"));if(i.indexOf(",")!=-1){k=i.substring(i.indexOf(",")+1);i=i.substring(0,i.indexOf(","));e=parseInt(k);if(isNaN(e)){e=0}}n=parseInt(i);if(isNaN(i)){i=0}}}switch(j){default:case"topRight":q+=m+p-27;r+=o;break;case"topLeft":r+=o;q+=m;break;case"centerRight":r=o+4;c=0;q=m+d.outerWidth(true)+5;break;case"centerLeft":q=m-(h.width()+2);r=o+4;c=0;break;case"bottomLeft":r=o+d.height()+5;c=0;q=m;break;case"bottomRight":q=m+p-27;r=o+d.height()+5;c=0;break;case"inline":q=0;r=0;c=0}q+=n;r+=e;return{callerTopPosition:r+"px",callerleftPosition:q+"px",marginTopSize:c+"px"}},_saveOptions:function(f,e){if(a.validationEngineLanguage){var c=a.validationEngineLanguage.allRules}else{a.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page")}a.validationEngine.defaults.allrules=c;var d=a.extend(true,{},a.validationEngine.defaults,e);f.data("jqv",d);return d},_getClassName:function(c){if(c){return c.replace(/:/g,"_").replace(/\./g,"_")}},_jqSelector:function(c){return c.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(c,g,f,e){var h,d;for(h=(f+1);h<g.length;h++){d=jQuery("#"+g[h]).first();if(d.length&&b._required(d,["required"],0,e,true)==undefined){return b._required(c,["required"],0,e)}}},_submitButtonClick:function(d){var c=a(this);var e=c.closest("form, .validationEngineContainer");e.data("jqv_submitButton",c.attr("id"))}};a.fn.validationEngine=function(c){var d=a(this);if(!d[0]){return d}if(typeof(c)=="string"&&c.charAt(0)!="_"&&b[c]){if(c!="showPrompt"&&c!="hide"&&c!="hideAll"){b.init.apply(d)}return b[c].apply(d,Array.prototype.slice.call(arguments,1))}else{if(typeof c=="object"||!c){b.init.apply(d,arguments);return b.attach.apply(d)}else{a.error("Method "+c+" does not exist in jQuery.validationEngine")}}};a.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:true,focusFirstField:true,showPrompts:true,validateNonVisibleFields:false,promptPosition:"topRight",bindMethod:"bind",inlineAjax:false,ajaxFormValidation:false,ajaxFormValidationURL:false,ajaxFormValidationMethod:"get",onAjaxFormComplete:a.noop,onBeforeAjaxFormValidation:a.noop,onValidationComplete:false,doNotShowAllErrosOnSubmit:false,custom_error_messages:{},binded:true,showArrow:true,showArrowOnRadioAndCheckbox:false,isError:false,maxErrorsPerField:false,ajaxValidCache:{},autoPositionUpdate:false,InvalidFields:[],onFieldSuccess:false,onFieldFailure:false,onSuccess:false,onFailure:false,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:false,autoHideDelay:10000,fadeDuration:0.3,prettySelect:false,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:false}};a(function(){a.validationEngine.defaults.promptPosition=b.isRTL()?"topLeft":"topRight"})})(jQuery);